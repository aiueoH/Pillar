package com.pillar;

import java.util.ArrayList;

import org.andengine.engine.handler.timer.ITimerCallback;
import org.andengine.engine.handler.timer.TimerHandler;
import org.andengine.entity.Entity;
import org.andengine.entity.primitive.Line;
import org.andengine.entity.primitive.Rectangle;
import org.andengine.opengl.vbo.VertexBufferObjectManager;
import org.andengine.util.color.Color;

import android.R.integer;

public class BarTimer extends Rectangle {

	private TimerHandler timerHandler;
	
	private Line[] borderLines = new Line[4];
	private Rectangle bar;
	
	private float x, y, width, height;
	private float duration, time;
	private float interval;
	
	public BarTimer(float x, float y, float width, float height, float boderWidth, 
			Color barColor, Color borderColor, 
			float duration,
			float interval,
			VertexBufferObjectManager vertexBufferObjectManager) {
		super(x, y, width, height, vertexBufferObjectManager);
		this.setColor(Color.TRANSPARENT);
		this.x = x;
		this.y = y;
		this.width = width;
		this.height = height;
		this.duration = duration;
		this.interval = interval;
		this.bar = new Rectangle(x, y, width, height, vertexBufferObjectManager);
		this.bar.setColor(barColor);
		this.attachChild(this.bar);
		this.borderLines[0] = new Line(x, y, x + width, y, boderWidth, vertexBufferObjectManager);
		this.borderLines[1] = new Line(x + width, y, x + width, y + height, boderWidth, vertexBufferObjectManager);
		this.borderLines[2] = new Line(x + width, y + height, x, y + height, boderWidth, vertexBufferObjectManager);
		this.borderLines[3] = new Line(x, y + height, x, y, boderWidth, vertexBufferObjectManager);
		for (Line line : this.borderLines) {
			line.setColor(borderColor);
			this.attachChild(line);
		}

		this.time = 0;
		this.timerHandler = new TimerHandler(interval, true, new ITimerCallback() {
			@Override
			public void onTimePassed(TimerHandler pTimerHandler) {
				if (time > 0) {
					
				}
			}
		})
	}
	
	public void setPercent(float n) {
		this.bar.setY(this.x + (1f - n) * this.height);
		this.bar.setHeight(n * this.height);
	}

}
